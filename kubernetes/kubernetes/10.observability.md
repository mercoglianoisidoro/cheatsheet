---
sort: 10
---

# Observability

## Reminder - The components of observability


from [https://opentelemetry.io/docs/concepts/signals/](https://opentelemetry.io/docs/concepts/signals/):

**Traces:** 
Traces give us the big picture of what happens when a request is made by user or an application.

**Metrics:**
A metric is a measurement about a service, captured at runtime.

**Logs:**
A log is a timestamped text record, either structured (recommended) or unstructured, with metadata.

**Baggage:**
Baggage refers to contextual information thatâ€™s passed between spans



## Logging

Having a logging backend , 3 way of logging:

- **Application forwarding:**
  the app send logs directly to a backend

- **Sidecar processing:**
  a sidecar manage logs.
  The app write to a shared storage (shared between app pod and sidecar); the sidecar read and process the. It can 1) forward, or 2) write to stdout/stderr

- **Node agent forwarding:**
  a pod on each node forward to a backend.

  A log processor runs on each node, read the logfiles and forward to a backend. (The most used)



### Node agent forwarding

The most used node agent is Fluentd and Fluent Bit.
Consider using Fluentd if you need its plug-ins, and use it as an aggregator in the cluster. 



### Kubernetes Audit Logs

Useful to answer the question: who did what. 

Audit policy are passed to the control plane by the option --audit-policy-file flag.



### Kubernetes Events

Kubernetes Events are a native k8s object: the are a king of platform log stored in etcd with a retention time of 1 hour.

They expose information on event happening inside the cluster.

They are available by API, kubectl or you can export them as metrics (ex: Prometheur exporter).





## Metrics / Prometheus

Prometheus is the open source metrics tool used as standard de facto on k8s. 
Reminder: app and infra expose metrics that Prometheus can scrape.

The control plane components expose Prometheus metrics.

### Storage

Prometheus is not designed for long-term storage of metrics but many solution exists: [https://prometheus.io/docs/operating/integrations/#remote-endpoints-and-storage](https://prometheus.io/docs/operating/integrations/#remote-endpoints-and-storage)

Note: [Thanos](https://thanos.io/) and [Cortex](https://cortexmetrics.io/) are 2 projects of CNCF